<h2 class="text-center my-4 fw-bold">‚úèÔ∏è Edit Property</h2>

<form [formGroup]="form" (ngSubmit)="onSubmit()" class="p-4 shadow rounded bg-light">
  <div class="row g-3">
    <!-- Title -->
    <div class="col-md-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Title</mat-label>
        <input matInput formControlName="title" />
      </mat-form-field>
    </div>

    <!-- City -->
    <div class="col-md-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>City</mat-label>
        <input matInput formControlName="city" />
      </mat-form-field>
    </div>

    <!-- Country -->
    <div class="col-md-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Country</mat-label>
        <input matInput formControlName="country" />
      </mat-form-field>
    </div>

    <!-- Price -->
    <div class="col-md-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Price per Night</mat-label>
        <input type="number" matInput formControlName="pricePerNight" />
      </mat-form-field>
    </div>

    <!-- Property Type -->
    <div class="col-md-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Property Type</mat-label>
        <mat-select formControlName="propertyType">
          <mat-option value="Apartment">Apartment</mat-option>
          <mat-option value="Villa">Villa</mat-option>
          <mat-option value="House">House</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <!-- Max Guests -->
    <div class="col-md-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Max Guests</mat-label>
        <input type="number" min="1" matInput formControlName="maxGuests" />
      </mat-form-field>
    </div>

    <!-- Bedrooms -->
    <div class="col-md-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Bedrooms</mat-label>
        <input type="number" min="1" matInput formControlName="bedrooms" />
      </mat-form-field>
    </div>

    <!-- Bathrooms -->
    <div class="col-md-6">
      <mat-form-field appearance="outline" class="w-100">
        <mat-label>Bathrooms</mat-label>
        <input type="number" min="1" matInput formControlName="bathrooms" />
      </mat-form-field>
    </div>

    <!-- üî• Amenities fixed (no ngModel) -->
    <div class="mt-3">
      <h5>Amenities</h5>
      <div class="d-flex flex-wrap">
        <mat-checkbox *ngFor="let a of amenities" [checked]="a.selected" (change)="toggleAmenity(a, $event.checked)"
          class="me-3">
          {{a.name}}
        </mat-checkbox>
      </div>
    </div>

    <!-- üî• Photos fixed layout -->
    <div class="mt-3">
      <h5>Existing Photos (max 5)</h5>
      <div class="d-flex flex-wrap gap-2">
        <div *ngFor="let photo of existingPhotos" class="position-relative">
          <img [src]="photo.url" class="img-thumbnail" style="width:100px; height:100px; object-fit:cover;">
          <button mat-mini-fab color="warn" class="position-absolute top-0 end-0" (click)="removeExistingPhoto(photo)">
            <mat-icon>close</mat-icon>
          </button>
        </div>

      </div>
    </div>

    <!-- Upload New Photos üî• -->
    <div class="col-12 mt-3">
      <label>Upload New Photos (max 5)</label>
      <input type="file" (change)="onFilesSelected($event)" multiple accept="image/*" />
      <div *ngIf="newFiles.length > 0">
        <small>{{newFiles.length}} file(s) selected</small>
      </div>
    </div>

    <!-- Save Button -->
    <div class="col-12 text-center mt-3">
      <button mat-raised-button color="primary" type="submit" class="btn btn-primary px-5 py-2">
        üíæ Save Changes
      </button>
    </div>
  </div>
</form>